<!DOCTYPE html>
<html lang="ru" class="h-100">
<head>
    <meta charset="utf-8">
    <title>Редактор скинов KolibriOS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Редактор для создания и изменения скинов для операционной системы KolibriOS">

    <!-- Предзагрузка -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" as="style">

    <!-- Bootstrap и иконки -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Пользовательские стили -->
    <link rel="stylesheet" href="style/SkinLoader.css">
    <link rel="stylesheet" href="style/style.css">

    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body class="d-flex flex-column h-100">

<!-- Кнопка панели свойств (моб.) -->
<button class="btn btn-light position-fixed bottom-0 end-0 m-3 fs-4 shadow d-md-none z-1051" style="z-index:1051"
        type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasProperties" aria-controls="offcanvasProperties"
        aria-label="Открыть панель свойств">
    <i class="bi bi-sliders"></i>
</button>

<!-- Шапка -->
<header class="bg-light py-3 shadow-sm">
    <div class="container text-center">
        <h1 class="mb-0 text-primary">Редактор скинов KolibriOS</h1>
        <p class="text-muted mt-2">Создавайте и редактируйте скины для KolibriOS</p>
    </div>
</header>

<main class="flex-grow-1 row g-0">
    <div class="container border py-4 col-md-9">
        <!-- Загрузка файла -->
        <section class="text-center m-auto border rounded shadow p-3 bg-white upload-section" style="max-width:550px">
            <h2 class="h5 mb-3">Загрузка скина</h2>
            <p>Выберите файл <code>.skn</code> и нажмите <strong class="text-primary">Загрузить</strong>.</p>

            <div class="d-flex flex-column flex-md-row justify-content-center gap-2 mb-3">
                <input type="file" class="form-control" id="file-input" accept=".skn"
                       aria-label="Выбор .skn файла" aria-describedby="file-help">
            </div>

            <div class="d-flex gap-2 justify-content-center">
                <button class="btn btn-primary" id="load-btn" onclick="skinManager.read()">
                    <i class="bi bi-upload me-1"></i> Загрузить
                </button>
                <button class="btn btn-success" id="save-btn" onclick="skinManager.save()">
                    <i class="bi bi-download me-1"></i> Сохранить
                </button>
            </div>

            <div id="file-help" class="form-text mt-2">Максимальный размер файла: 2MB</div>
        </section>

        <!-- Примеры окон -->
        <section class="row mt-4 g-4">
            <!-- Активное окно -->
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header bg-light text-center">
                        <h3 class="h6 mb-0">Активное окно</h3>
                    </div>
                    <div class="card-body d-flex justify-content-center align-items-center p-2">
                        <div class="window mx-auto" data-status="active" role="img" aria-label="Пример активного окна">
                            <div class="panel">
                                <div class="left"></div>
                                <div class="title">Заголовок окна</div>
                                <div class="button"></div>
                                <div class="close"></div>
                                <div class="min"></div>
                            </div>
                            <div class="inner d-flex flex-column justify-content-center align-items-center text-center p-3">
                                <button class="mb-2">Текст на кнопке</button>
                                <span>Текст в окне</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Неактивное окно -->
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header bg-light text-center">
                        <h3 class="h6 mb-0">Неактивное окно</h3>
                    </div>
                    <div class="card-body d-flex justify-content-center align-items-center p-2">
                        <div class="window mx-auto" data-status="inactive" role="img"
                             aria-label="Пример неактивного окна">
                            <div class="panel">
                                <div class="left"></div>
                                <div class="title">Заголовок окна</div>
                                <div class="button"></div>
                                <div class="close"></div>
                                <div class="min"></div>
                            </div>
                            <div class="inner d-flex flex-column justify-content-center align-items-center text-center p-3">
                                <button class="mb-2">Текст на кнопке</button>
                                <span>Текст в окне</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Панель свойств -->
    <aside class="offcanvas-md offcanvas-end d-md-block bg-light col-md-3"
           tabindex="-1" id="offcanvasProperties">
        <div class="offcanvas-header d-md-none bg-light">
            <h2 class="h5 mb-0">Свойства скина</h2>
            <button class="btn-close" data-bs-dismiss="offcanvas" aria-label="Закрыть панель свойств"></button>
        </div>
        <div class="offcanvas-body d-md-block p-3">
            <h2 class="text-center d-none d-md-block h4 text-primary mb-3">Свойства скина</h2>

            <div class="alert alert-info d-none" id="property-help">Выберите элемент для редактирования</div>

            <!-- Цвет -->
            <div class="mb-3 field-color d-none">
                <label for="color-picker" class="form-label">Цвет</label>
                <div class="input-group">
                    <input type="color" class="form-control form-control-color" id="color-picker" value="#563d7c"
                           required>
                    <input type="text" class="form-control" id="color-hex" placeholder="#RRGGBB"
                           pattern="^#([A-Fa-f0-9]{6})$" required>
                </div>
            </div>

            <!-- Число -->
            <div class="mb-3 field-integer d-none">
                <label for="number-input" class="form-label">Числовое значение</label>
                <input type="number" class="form-control" id="number-input">
            </div>

            <!-- Аккордеон свойств -->
            <div class="accordion" id="propertiesAccordion">
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#activePanel">Активное окно
                        </button>
                    </h3>
                    <div id="activePanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="active"></div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#inactivePanel">Неактивное окно
                        </button>
                    </h3>
                    <div id="inactivePanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="inactive"></div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#dtpPanel">DTP
                        </button>
                    </h3>
                    <div id="dtpPanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="dtp"></div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#marginPanel">Отступы
                        </button>
                    </h3>
                    <div id="marginPanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="margin"></div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#closePanel">Кнопка «Закрыть»
                        </button>
                    </h3>
                    <div id="closePanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="close"></div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#minPanel">Кнопка «Свернуть»
                        </button>
                    </h3>
                    <div id="minPanel" class="accordion-collapse collapse">
                        <div class="accordion-body" id="min"></div>
                    </div>
                </div>
            </div>
        </div>
    </aside>
</main>

<!-- Подвал -->
<footer class="bg-light py-3 mt-auto shadow-sm">
    <div class="container text-center">
        <div class="d-flex flex-column flex-md-row justify-content-center align-items-center gap-2">
            <a href="//github.com/paulcodeman/skin/" target="_blank" class="text-decoration-none">
                <i class="bi bi-github me-1"></i> GitHub проекта
            </a>
            <span class="d-none d-md-inline">•</span>
            <a href="//kolibrios.org" target="_blank" class="text-decoration-none">
                <i class="bi bi-box-arrow-up-right me-1"></i> Официальный сайт KolibriOS
            </a>
        </div>
        <div class="mt-2 text-muted small">
            &copy; <span id="current-year">2025</span> Редактор скинов KolibriOS
        </div>
    </div>
</footer>

<!-- Скрипты -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="js/lzma_worker-min.js"></script>
<script src="js/BinaryParser.js"></script>
<script src="js/KPacker.js"></script>
<script src="js/SkinLoader.js"></script>
<script src="js/script.js"></script>

<script>
    document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(el => new bootstrap.Tooltip(el));
</script>
</body>
</html>
